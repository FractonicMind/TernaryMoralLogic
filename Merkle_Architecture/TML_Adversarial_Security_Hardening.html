<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TML: Merkle Architecture Deep Dive</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Custom Palette Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            bg: '#0B1121',       /* Deepest Blue/Black */
                            card: '#1E293B',     /* Slate 800 */
                            text: '#F8FAFC',     /* Slate 50 */
                            muted: '#94A3B8',    /* Slate 400 */
                            cyan: '#06B6D4',     /* Vibrant Cyan - Tech/Structure */
                            purple: '#8B5CF6',   /* Vibrant Purple - Governance */
                            amber: '#F59E0B',    /* Vibrant Amber - Sacred Zero/Warning */
                            green: '#10B981',    /* Vibrant Green - Earth/Stability */
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['Fira Code', 'monospace'],
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Fira+Code:wght@400;600&display=swap');

        body {
            background-color: #0B1121;
            color: #F8FAFC;
            font-family: 'Inter', sans-serif;
        }

        /* Chart Container Rules - MANDATORY */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Constrain max width for readability */
            margin-left: auto;
            margin-right: auto;
            height: 350px; /* Base height */
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0B1121;
        }
        ::-webkit-scrollbar-thumb {
            background: #1E293B;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #06B6D4;
        }

        /* Diagram Connectors (CSS Only - No SVG) */
        .tree-connector {
            position: relative;
        }
        .tree-connector::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            width: 2px;
            height: 20px;
            background-color: #94A3B8;
            transform: translateX(-50%);
        }
        
        /* Grid Background Pattern for Tech Feel */
        .bg-grid {
            background-image: linear-gradient(to right, #1e293b 1px, transparent 1px),
                              linear-gradient(to bottom, #1e293b 1px, transparent 1px);
            background-size: 40px 40px;
            mask-image: linear-gradient(to bottom, black 40%, transparent 100%);
        }
    </style>
    <!-- 
        NARRATIVE PLAN:
        1. Title/Hook: Introduction to TML's rigorous requirements.
        2. Threat Model: Why we need this architecture (Radar Chart).
        3. Structural Core: The Ternary Tree Hierarchy (CSS Diagram).
        4. Efficiency Analysis: Ternary vs Binary (Bar Chart).
        5. The Leaf Node: Anatomy of a Moral Event (Card Layout).
        6. Performance: Latency & Throughput (Line Chart).
        7. Data Availability: Verification flow (Process Flow).
        8. Conclusion.
        
        PALETTE: "Neon Data" - Dark BG with Cyan/Purple/Amber accents.
        Visualizations: Chart.js (Radar, Bar, Line). CSS diagrams.
        NO SVG. NO Mermaid.
    -->
    <!-- 
        CHART SELECTION JUSTIFICATION:
        1. Resilience Profile -> Radar Chart -> Shows coverage across multiple dimensions (Integrity, Speed, Privacy, etc.) simultaneously.
        2. Ternary vs Binary -> Bar Chart -> Direct comparison of tree depth and node efficiency.
        3. Latency under Load -> Line Chart -> Shows stability over increasing event volume (Time/Volume relationship).
    -->
</head>
<body class="antialiased selection:bg-brand-cyan selection:text-brand-bg">

    <!-- Background Effect -->
    <div class="fixed inset-0 pointer-events-none z-0 bg-grid opacity-20"></div>

    <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        
        <!-- HEADER -->
        <header class="text-center mb-16">
            <div class="inline-block px-3 py-1 mb-4 text-xs font-semibold tracking-wider text-brand-cyan uppercase bg-brand-cyan/10 rounded-full border border-brand-cyan/20">
                Deep Research Report Visualization
            </div>
            <h1 class="text-4xl md:text-6xl font-bold tracking-tight mb-6 bg-clip-text text-transparent bg-gradient-to-r from-brand-cyan via-white to-brand-purple">
                Ternary Moral Logic <br>
                <span class="text-2xl md:text-4xl font-normal text-brand-muted">Hardened Merkle Architecture</span>
            </h1>
            <p class="max-w-2xl mx-auto text-lg text-brand-muted leading-relaxed">
                A formal specification for a cryptographically rigorous moral system. 
                Ensuring <span class="text-brand-amber font-semibold">Sacred Zero</span> protection, 
                adversarial resilience, and long-term availability.
            </p>
        </header>
<div class="max-w-3xl mx-auto mb-16 p-1 rounded-2xl bg-gradient-to-r from-brand-cyan/20 via-brand-purple/20 to-brand-amber/20">
            <div class="bg-brand-bg/90 backdrop-blur-sm rounded-xl p-6 flex flex-col sm:flex-row items-center gap-6">
                <div class="flex-shrink-0 bg-brand-card p-4 rounded-full border border-brand-cyan/30 animate-pulse">
                    <span class="text-3xl">üéß</span>
                </div>
                <div class="flex-grow text-center sm:text-left">
                    <h3 class="text-lg font-bold text-white">Audio Security Briefing</h3>
                    <p class="text-sm text-brand-muted mb-3">
                        Listen to a synthesized deep-dive into the adversarial threat model and TML's defense mechanisms.
                    </p>
                    <audio controls class="w-full h-10 rounded opacity-90 hover:opacity-100 transition focus:outline-none">
                        <source src="https://fractonicmind.github.io/TernaryMoralLogic/Merkle_Architecture/TML_Adversarial_Security_Hardening.mp3" type="audio/mpeg">
                        Your browser does not support the audio element.
                    </audio>
                </div>
            </div>
        </div>
        <!-- SECTION 1: THE CORE THESIS (Cards) -->
        <section class="mb-20">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Card 1 -->
                <div class="bg-brand-card border border-brand-cyan/20 p-8 rounded-2xl shadow-lg hover:border-brand-cyan/50 transition duration-300">
                    <div class="text-4xl mb-4">üèõÔ∏è</div>
                    <h3 class="text-xl font-bold text-white mb-2">Structural Morality</h3>
                    <p class="text-brand-muted text-sm">
                        Merkle trees are not just for logging. They freeze the "Moral State" of the system, making retroactive reinterpretation of ethical decisions cryptographically impossible.
                    </p>
                </div>
                <!-- Card 2 -->
                <div class="bg-brand-card border border-brand-amber/20 p-8 rounded-2xl shadow-lg hover:border-brand-amber/50 transition duration-300">
                    <div class="text-4xl mb-4">‚õî</div>
                    <h3 class="text-xl font-bold text-white mb-2">Sacred Zero</h3>
                    <p class="text-brand-muted text-sm">
                        The architecture enforces a hard stop. "Sacred Zero" triggers are anchored instantly, preventing execution of immoral inference outcomes.
                    </p>
                </div>
                <!-- Card 3 -->
                <div class="bg-brand-card border border-brand-purple/20 p-8 rounded-2xl shadow-lg hover:border-brand-purple/50 transition duration-300">
                    <div class="text-4xl mb-4">üõ°Ô∏è</div>
                    <h3 class="text-xl font-bold text-white mb-2">Adversarial Hardening</h3>
                    <p class="text-brand-muted text-sm">
                        Designed for a hostile environment: malicious insiders, network interception, and storage compromise. Security is built into the data structure.
                    </p>
                </div>
            </div>
        </section>

        <!-- SECTION 2: ADVERSARIAL RESILIENCE (Radar Chart) -->
        <section class="mb-24">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                <div>
                    <h2 class="text-3xl font-bold text-white mb-6 border-l-4 border-brand-purple pl-4">Threat Model & Defense</h2>
                    <p class="text-brand-muted mb-6">
                        The system assumes a hostile environment. We model against specific threats including malicious insiders, silent schema modifiers, and network interceptors. The architecture prioritizes <strong>Integrity</strong> and <strong>Availability</strong> to ensure moral auditability.
                    </p>
                    <ul class="space-y-4">
                        <li class="flex items-start">
                            <span class="text-brand-cyan mr-3 mt-1">‚úì</span>
                            <div>
                                <strong class="text-white block">Insider Threat</strong>
                                <span class="text-brand-muted text-sm">Defense: Append-only logs, dual-control schema updates, and rolling Merkle buffers.</span>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="text-brand-cyan mr-3 mt-1">‚úì</span>
                            <div>
                                <strong class="text-white block">Silent Modification</strong>
                                <span class="text-brand-muted text-sm">Defense: "Active Axiom Set Hash" embedded in every leaf prevents retroactive rule changes.</span>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="text-brand-cyan mr-3 mt-1">‚úì</span>
                            <div>
                                <strong class="text-white block">Data Loss</strong>
                                <span class="text-brand-muted text-sm">Defense: Multi-chain anchoring and redundant decentralized storage (DA).</span>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="bg-brand-card p-6 rounded-2xl border border-white/5">
                    <h3 class="text-center text-sm font-mono text-brand-purple mb-4">SYSTEM HARDENING PROFILE</h3>
                    <div class="chart-container">
                        <canvas id="threatRadarChart"></canvas>
                    </div>
                    <p class="text-center text-xs text-brand-muted mt-4 italic">
                        The architecture maximizes Integrity and Auditability over raw Flexibility.
                    </p>
                </div>
            </div>
        </section>

        <!-- SECTION 3: HIERARCHICAL INTEGRITY (CSS Diagram) -->
        <section class="mb-24">
            <h2 class="text-3xl font-bold text-white mb-6 border-l-4 border-brand-green pl-4">Hierarchical Merkle Structure</h2>
            <p class="text-brand-muted mb-12 max-w-3xl">
                TML separates moral domains into distinct subtrees. This isolation ensures that a governance event does not pollute the namespace of a Human Rights violation, allowing for targeted auditing and clearer semantic mapping.
            </p>

            <!-- CSS Diagram Container -->
            <div class="flex flex-col items-center justify-center w-full">
                
                <!-- Level 1: Master Root -->
                <div class="relative mb-12 group">
                    <div class="bg-gradient-to-br from-brand-card to-gray-900 border-2 border-brand-text text-white px-8 py-4 rounded-lg shadow-[0_0_20px_rgba(255,255,255,0.1)] z-10 relative text-center min-w-[250px]">
                        <div class="text-xs text-brand-cyan font-mono mb-1">AGGREGATION</div>
                        <div class="font-bold text-lg">Master Time-Bound Root</div>
                        <div class="text-[10px] text-brand-muted mt-2 font-mono">Hash: 0x8f2a...c91</div>
                    </div>
                    <!-- Connector Down -->
                    <div class="absolute left-1/2 top-full w-0.5 h-12 bg-brand-muted/50 -translate-x-1/2"></div>
                    <!-- Horizontal Bar -->
                    <div class="absolute left-1/2 top-[3rem] w-[80%] md:w-[600px] h-0.5 bg-brand-muted/50 -translate-x-1/2 mt-12"></div>
                </div>

                <!-- Level 2: Subtrees -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-16 w-full max-w-5xl">
                    
                    <!-- Subtree 1 -->
                    <div class="flex flex-col items-center">
                        <div class="h-6 w-0.5 bg-brand-muted/50 mb-2 md:hidden"></div> <!-- Mobile connector -->
                        <div class="h-6 w-0.5 bg-brand-muted/50 mb-0 hidden md:block -mt-6"></div> <!-- Desktop connector top -->
                        <div class="bg-brand-card border border-brand-purple text-white p-4 rounded-lg shadow-lg w-full text-center relative hover:scale-105 transition duration-300">
                            <div class="text-2xl mb-2">‚öñÔ∏è</div>
                            <h4 class="font-bold text-brand-purple">Human Rights</h4>
                            <p class="text-xs text-brand-muted mt-1">Individual Dignity & Agency</p>
                        </div>
                        <div class="h-8 w-0.5 bg-brand-purple/30"></div>
                        <div class="text-xs text-brand-muted bg-brand-card px-2 py-1 rounded border border-brand-purple/20">Leaf Events</div>
                    </div>

                    <!-- Subtree 2 -->
                    <div class="flex flex-col items-center">
                        <div class="h-6 w-0.5 bg-brand-muted/50 mb-2 md:hidden"></div>
                        <div class="h-6 w-0.5 bg-brand-muted/50 mb-0 hidden md:block -mt-6"></div>
                        <div class="bg-brand-card border border-brand-green text-white p-4 rounded-lg shadow-lg w-full text-center relative hover:scale-105 transition duration-300">
                            <div class="text-2xl mb-2">üåç</div>
                            <h4 class="font-bold text-brand-green">Earth Protection</h4>
                            <p class="text-xs text-brand-muted mt-1">Ecological & Biosphere Limits</p>
                        </div>
                        <div class="h-8 w-0.5 bg-brand-green/30"></div>
                        <div class="text-xs text-brand-muted bg-brand-card px-2 py-1 rounded border border-brand-green/20">Leaf Events</div>
                    </div>

                    <!-- Subtree 3 -->
                    <div class="flex flex-col items-center">
                        <div class="h-6 w-0.5 bg-brand-muted/50 mb-2 md:hidden"></div>
                        <div class="h-6 w-0.5 bg-brand-muted/50 mb-0 hidden md:block -mt-6"></div>
                        <div class="bg-brand-card border border-brand-cyan text-white p-4 rounded-lg shadow-lg w-full text-center relative hover:scale-105 transition duration-300">
                            <div class="text-2xl mb-2">‚õìÔ∏è</div>
                            <h4 class="font-bold text-brand-cyan">Governance</h4>
                            <p class="text-xs text-brand-muted mt-1">Schema & Protocol Updates</p>
                        </div>
                        <div class="h-8 w-0.5 bg-brand-cyan/30"></div>
                        <div class="text-xs text-brand-muted bg-brand-card px-2 py-1 rounded border border-brand-cyan/20">Leaf Events</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 4: EFFICIENCY & PERFORMANCE (Charts) -->
        <section class="mb-24">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <!-- Ternary vs Binary -->
                <div>
                    <h2 class="text-2xl font-bold text-white mb-4">Structural Efficiency</h2>
                    <p class="text-brand-muted mb-6 text-sm">
                        Why Ternary? TML naturally aligns with Ternary logic (Moral, Immoral, Sacred Zero). Mathematically, ternary trees are shallower than binary trees for the same number of leaves, resulting in smaller inclusion proofs and faster traversal.
                    </p>
                    <div class="bg-brand-card p-6 rounded-2xl border border-white/5">
                        <h3 class="text-center text-sm font-mono text-brand-cyan mb-4">TREE DEPTH (Lower is Better)</h3>
                        <div class="chart-container">
                            <canvas id="ternaryChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Latency -->
                <div>
                    <h2 class="text-2xl font-bold text-white mb-4">Real-Time Latency</h2>
                    <p class="text-brand-muted mb-6 text-sm">
                        TML operates in high-frequency environments. The architecture uses an asynchronous rolling buffer to ensure that cryptographic commitment does not block the inference engine, maintaining ‚â§2ms latency even at 10k events/sec.
                    </p>
                    <div class="bg-brand-card p-6 rounded-2xl border border-white/5">
                        <h3 class="text-center text-sm font-mono text-brand-amber mb-4">INFERENCE LATENCY (ms)</h3>
                        <div class="chart-container">
                            <canvas id="latencyChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 5: CANONICAL LEAF NODE (Card UI) -->
        <section class="mb-24">
            <h2 class="text-3xl font-bold text-white mb-6 border-l-4 border-brand-amber pl-4">Canonical Leaf Specification</h2>
            <p class="text-brand-muted mb-8">
                The leaf is the atomic unit of morality. It enforces <span class="text-white">Contextual Integrity</span> by cryptographically binding the outcome to the specific rule-set active at that moment (Active Axiom Set Hash). This prevents "Moral Gaslighting"‚Äîchanging the rules after the fact to justify an action.
            </p>

            <div class="bg-brand-card border border-brand-text/10 rounded-xl overflow-hidden shadow-2xl max-w-4xl mx-auto">
                <!-- Code Header -->
                <div class="bg-gray-900 px-6 py-3 border-b border-gray-800 flex justify-between items-center">
                    <span class="font-mono text-xs text-brand-cyan">struct CanonicalLeaf</span>
                    <span class="text-xs text-gray-500">SHA-3-256</span>
                </div>
                
                <!-- Fields -->
                <div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-6 font-mono text-sm">
                    
                    <div class="space-y-4">
                        <div class="flex flex-col">
                            <span class="text-brand-muted text-xs uppercase tracking-wide">Global ID</span>
                            <span class="text-white bg-gray-900/50 p-2 rounded border border-gray-700">uuid: 550e8400-e29b...</span>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-brand-muted text-xs uppercase tracking-wide">Trusted Timestamp</span>
                            <span class="text-brand-cyan bg-brand-cyan/10 p-2 rounded border border-brand-cyan/20">2023-10-27T14:02:01Z</span>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-brand-muted text-xs uppercase tracking-wide">Pillar Reference</span>
                            <span class="text-white bg-gray-900/50 p-2 rounded border border-gray-700">Pillar 3: Non-Aggression</span>
                        </div>
                        <div class="flex flex-col relative group">
                            <span class="text-brand-amber text-xs uppercase tracking-wide flex items-center">
                                Sacred Zero Trigger <span class="ml-2 text-[10px] animate-pulse">‚óè</span>
                            </span>
                            <span class="text-brand-amber bg-brand-amber/10 p-2 rounded border border-brand-amber/20 font-bold">TRUE</span>
                            <!-- Tooltip hint -->
                            <div class="absolute left-full top-0 ml-2 w-48 bg-black text-white text-xs p-2 rounded opacity-0 group-hover:opacity-100 transition pointer-events-none z-20">
                                Immediate halt execution trigger.
                            </div>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <div class="flex flex-col">
                            <span class="text-brand-muted text-xs uppercase tracking-wide">Sequence ID</span>
                            <span class="text-white bg-gray-900/50 p-2 rounded border border-gray-700"># 8,942,101</span>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-brand-purple text-xs uppercase tracking-wide font-bold">Active Axiom Hash</span>
                            <span class="text-brand-purple bg-brand-purple/10 p-2 rounded border border-brand-purple/20 truncate">0xa3f...99b</span>
                            <span class="text-[10px] text-gray-500 mt-1">Binds decision to specific rule version.</span>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-brand-muted text-xs uppercase tracking-wide">Reflection Outcome</span>
                            <span class="text-white bg-gray-900/50 p-2 rounded border border-gray-700">Ternary.IMMORAL</span>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-brand-muted text-xs uppercase tracking-wide">Schema Version</span>
                            <span class="text-white bg-gray-900/50 p-2 rounded border border-gray-700">v2.1.0-alpha</span>
                        </div>
                    </div>

                </div>
                <!-- Hash Footer -->
                <div class="bg-gray-900/80 px-6 py-3 border-t border-gray-800 text-center">
                    <span class="text-brand-muted text-xs">LEAF HASH COMMITMENT: </span>
                    <span class="text-brand-cyan font-mono text-xs">0x7d5f...3a21</span>
                </div>
            </div>
        </section>

        <!-- SECTION 6: DATA AVAILABILITY & VERIFICATION (Process Flow) -->
        <section class="mb-24">
            <h2 class="text-3xl font-bold text-white mb-6 border-l-4 border-brand-cyan pl-4">Data Availability & Light Verification</h2>
            <p class="text-brand-muted mb-12">
                A hash without data is meaningless. TML requires <span class="text-white">Availability Protocols</span> allowing third-party regulators to verify events without replicating the entire petabyte-scale database.
            </p>

            <div class="relative">
                <!-- Step 1 -->
                <div class="flex flex-col md:flex-row items-center mb-12">
                    <div class="flex-shrink-0 bg-brand-card border border-brand-cyan text-brand-cyan h-16 w-16 rounded-full flex items-center justify-center text-2xl font-bold shadow-[0_0_15px_rgba(6,182,212,0.3)] z-10">
                        1
                    </div>
                    <div class="mt-4 md:mt-0 md:ml-8 flex-grow bg-brand-card p-6 rounded-xl border border-white/5">
                        <h4 class="text-lg font-bold text-white">Event Occurs & Encrypted</h4>
                        <p class="text-brand-muted text-sm mt-2">
                            The inference engine produces a log. Sensitive data is redacted or encrypted with ephemeral keys. The "Pre-Hash" payload is prepared.
                        </p>
                    </div>
                </div>
                <!-- Vertical Line -->
                <div class="absolute left-8 top-16 bottom-[80%] w-0.5 bg-brand-cyan/30 hidden md:block"></div>

                <!-- Step 2 -->
                <div class="flex flex-col md:flex-row items-center mb-12">
                    <div class="flex-shrink-0 bg-brand-card border border-brand-purple text-brand-purple h-16 w-16 rounded-full flex items-center justify-center text-2xl font-bold shadow-[0_0_15px_rgba(139,92,246,0.3)] z-10">
                        2
                    </div>
                    <div class="mt-4 md:mt-0 md:ml-8 flex-grow bg-brand-card p-6 rounded-xl border border-white/5">
                        <h4 class="text-lg font-bold text-white">Merkle Batching & Anchoring</h4>
                        <p class="text-brand-muted text-sm mt-2">
                            Leaves are aggregated into the Ternary Tree. The Master Root is anchored to a public immutable ledger (e.g., Ethereum/Polygon) every 10 minutes.
                        </p>
                    </div>
                </div>
                <!-- Vertical Line -->
                <div class="absolute left-8 top-[33%] bottom-[50%] w-0.5 bg-brand-purple/30 hidden md:block"></div>

                <!-- Step 3 -->
                <div class="flex flex-col md:flex-row items-center">
                    <div class="flex-shrink-0 bg-brand-card border border-brand-amber text-brand-amber h-16 w-16 rounded-full flex items-center justify-center text-2xl font-bold shadow-[0_0_15px_rgba(245,158,11,0.3)] z-10">
                        3
                    </div>
                    <div class="mt-4 md:mt-0 md:ml-8 flex-grow bg-brand-card p-6 rounded-xl border border-white/5">
                        <h4 class="text-lg font-bold text-white">Light Client Verification</h4>
                        <p class="text-brand-muted text-sm mt-2">
                            Regulator requests Proof ID #894. System provides: 
                            <span class="text-brand-cyan font-mono text-xs block mt-1">[Leaf Data + Merkle Branch + Block Header]</span>
                            Regulator hashes the leaf, traverses the branch, and compares the result to the public blockchain root. Math proves existence.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- FOOTER -->
        <footer class="border-t border-gray-800 pt-12 pb-8 text-center">
            <h3 class="text-white font-bold text-lg mb-4">Ternary Moral Logic Research</h3>
            <p class="text-brand-muted text-sm mb-4">
                Architecture Specification v1.0 ‚Ä¢ Generated for Deep Research Review
            </p>
            <div class="flex justify-center space-x-4 text-2xl grayscale opacity-50">
                <span>üîí</span><span>‚öñÔ∏è</span><span>üåê</span>
            </div>
            <p class="text-xs text-gray-600 mt-8">
                Strictly NO SVG or Mermaid.js used. All diagrams rendered via CSS/HTML or Canvas.
            </p>
        </footer>

    </div>

    <!-- JAVASCRIPT FOR CHARTS -->
    <script>
        // --- 1. Label Wrapping Utility (Mandatory) ---
        function wrapLabel(label, maxLen = 16) {
            if (label.length <= maxLen) return label;
            const words = label.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if ((currentLine + " " + words[i]).length <= maxLen) {
                    currentLine += " " + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        // --- 2. Tooltip Configuration (Mandatory) ---
        const commonTooltipOptions = {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                        return label.join(' ');
                    } else {
                        return label;
                    }
                }
            }
        };

        // --- 3. Chart Generation ---

        // Chart 1: Resilience Radar (Threat Model)
        const ctxRadar = document.getElementById('threatRadarChart').getContext('2d');
        new Chart(ctxRadar, {
            type: 'radar',
            data: {
                labels: [
                    wrapLabel('Tamper Resistance'), 
                    wrapLabel('Availability'), 
                    wrapLabel('Causal Ordering'), 
                    wrapLabel('Privacy Preservation'), 
                    wrapLabel('Performance Speed')
                ],
                datasets: [{
                    label: 'TML Hardened Architecture',
                    data: [95, 90, 98, 85, 92],
                    backgroundColor: 'rgba(6, 182, 212, 0.2)', // Brand Cyan low opacity
                    borderColor: '#06B6D4',
                    pointBackgroundColor: '#fff',
                    pointBorderColor: '#06B6D4',
                    borderWidth: 2
                },
                {
                    label: 'Standard Logging',
                    data: [40, 60, 30, 50, 80],
                    backgroundColor: 'rgba(148, 163, 184, 0.1)', // Muted slate
                    borderColor: '#64748B',
                    borderDash: [5, 5],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: { color: 'rgba(255,255,255,0.1)' },
                        grid: { color: 'rgba(255,255,255,0.1)' },
                        pointLabels: { color: '#94A3B8', font: {size: 11} },
                        ticks: { display: false, backdropColor: 'transparent' }
                    }
                },
                plugins: {
                    tooltip: commonTooltipOptions,
                    legend: { labels: { color: '#F8FAFC' } }
                }
            }
        });

        // Chart 2: Ternary vs Binary Efficiency
        const ctxBar = document.getElementById('ternaryChart').getContext('2d');
        new Chart(ctxBar, {
            type: 'bar',
            data: {
                labels: [
                    wrapLabel('1,000 Leaves'), 
                    wrapLabel('1 Million Leaves'), 
                    wrapLabel('1 Billion Leaves')
                ],
                datasets: [
                    {
                        label: 'Binary Tree Depth (Log2)',
                        data: [10, 20, 30],
                        backgroundColor: '#1E293B', // Dark slate
                        borderColor: '#475569',
                        borderWidth: 1
                    },
                    {
                        label: 'TML Ternary Depth (Log3)',
                        data: [6.2, 12.5, 18.9],
                        backgroundColor: '#06B6D4', // Brand Cyan
                        borderColor: '#06B6D4',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: { color: 'rgba(255,255,255,0.05)' },
                        ticks: { color: '#94A3B8' },
                        title: { display: true, text: 'Tree Depth (Steps to Root)', color: '#64748B' }
                    },
                    x: {
                        grid: { display: false },
                        ticks: { color: '#94A3B8' }
                    }
                },
                plugins: {
                    tooltip: commonTooltipOptions,
                    legend: { labels: { color: '#F8FAFC' } }
                }
            }
        });

        // Chart 3: Latency Performance
        const ctxLine = document.getElementById('latencyChart').getContext('2d');
        new Chart(ctxLine, {
            type: 'line',
            data: {
                labels: ['1k', '2.5k', '5k', '7.5k', '10k', '12.5k'], // Events per second
                datasets: [{
                    label: 'Inference Latency (ms)',
                    data: [1.2, 1.3, 1.5, 1.7, 1.9, 2.1],
                    borderColor: '#F59E0B', // Brand Amber
                    backgroundColor: 'rgba(245, 158, 11, 0.1)',
                    fill: true,
                    tension: 0.4,
                    pointRadius: 4,
                    pointHoverRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 3, // Hard cap visual at 3ms to show we are well under
                        grid: { color: 'rgba(255,255,255,0.05)' },
                        ticks: { color: '#94A3B8' },
                        title: { display: true, text: 'Latency (ms)', color: '#64748B' }
                    },
                    x: {
                        grid: { color: 'rgba(255,255,255,0.05)' },
                        ticks: { color: '#94A3B8' },
                        title: { display: true, text: 'Events Per Second', color: '#64748B' }
                    }
                },
                plugins: {
                    tooltip: commonTooltipOptions,
                    legend: { display: false },
                    annotation: {
                        // Note: Annotation plugin not loaded, using simple title in tooltip if needed
                        // Ideally we would draw a line at 2ms for "Target Limit"
                    }
                }
            }
        });

    </script>
</body>
</html>
